{% if parameter.IsDateTimeArray -%}
for (var i = 0; i < {{ parameter.VariableName }}.Length; i++)
{
    if (i > 0) urlBuilder.Append(',');
    urlBuilder.Append(Uri.EscapeDataString({{ parameter.VariableName }}[i].ToString("{{ ParameterDateTimeFormat }}", CultureInfo.InvariantCulture)));
}
{% elsif parameter.IsDateArray -%}
for (var i = 0; i < {{ parameter.VariableName }}.Length; i++)
{
    if (i > 0) urlBuilder.Append(',');
    urlBuilder.Append(Uri.EscapeDataString({{ parameter.VariableName }}[i].ToString("{{ ParameterDateFormat }}", CultureInfo.InvariantCulture)));
}
{% elsif parameter.IsDateTime -%}
urlBuilder.Append(Uri.EscapeDataString({{ parameter.VariableName }}.ToString("{{ ParameterDateTimeFormat }}", CultureInfo.InvariantCulture)));
{% elsif parameter.IsDate -%}
urlBuilder.Append(Uri.EscapeDataString({{ parameter.VariableName }}.ToString("{{ ParameterDateFormat }}", CultureInfo.InvariantCulture)));
{% elsif parameter.IsArray -%}
for (var i = 0; i < {{ parameter.VariableName }}.Length; i++)
{
    if (i > 0) urlBuilder.Append(',');
    urlBuilder.Append(ConvertToString({{ parameter.VariableName }}[i], CultureInfo.InvariantCulture));
}
{% else -%}
urlBuilder.Append(Uri.EscapeDataString(ConvertToString({{ parameter.VariableName }}, CultureInfo.InvariantCulture)));
{%- endif %}
